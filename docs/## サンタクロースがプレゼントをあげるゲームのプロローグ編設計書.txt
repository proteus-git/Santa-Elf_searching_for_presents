## サンタとエルフのプレゼントさがし＆配りゲーム 設計書

**1. ゲームの概要:**

*   **目的**: 3歳程度のこどもが、画面上のオブジェクトを操作して、プレゼントを探し出し（ステージ1）、動物たちに届ける（ステージ2）ことで、想像力と探求心を育む。
*   **構成**: 全2ステージ構成。
    *   **ステージ1 (Search)**: 森の中でプレゼントを探す。
    *   **ステージ2 (Delivery)**: 集めたプレゼントを動物たちに配る。
*   **対象年齢**: 3歳以上
*   **主要な機能**:
    *   **キャラクターの追従移動**: マウスカーソルをトナカイ→そり→サンタの順で追従（スネーク移動）。
    *   **動的なサイズ変化**: 移動速度に応じてキャラクターが伸縮（ゴムのような動き）。
    *   **ドラッグ＆ドロップ**: オブジェクトの移動・回収・配布。
    *   **BGM**: `christmas-song.mp3` (ミュート機能付き)。

---

### **ステージ1: プレゼント探し (index.html)**

**1. 画面構成:**
*   **背景**: `snow-coveredtreehouse.webp` (昼の雪景色)
*   **UI**:
    *   ヘッダー: タイトル表示。
    *   インジケーター: エルフが探すべき「ターゲット」を指示。クリックでスキップ可能。
    *   インベントリ（袋）: 回収したアイテムを表示。
*   **オブジェクト**:
    *   プレゼント: どんぐり、木の実、ニンジン、マフラー、歯ブラシ、王冠。
    *   装飾: 石ころ、葉っぱ、小枝、木など。

**2. ゲームルール:**
*   **操作**: 画面上のオブジェクトをドラッグして、左下の「サンタの袋」に入れる。
*   **ターゲット**: エルフが指定したアイテムのみ回収可能。
*   **クリア条件**: 各種類のプレゼントを2個ずつ集める。
*   **クリア演出**:
    *   "Merry Christmas!" の文字が表示される。
    *   サンタたちが画面外へ飛び去る（縮小しながら移動）。
    *   自動的にステージ2へ遷移。

---

### **ステージ2: プレゼント配り (stage2.html)**

**1. 画面構成:**
*   **背景**: `nightsnow-coveredtreehouse.webp.png` (夜の雪景色)
*   **視覚効果**:
    *   **雪**: 降り積もる雪のアニメーション。
    *   **星空**: きらめく星と、サンタを追いかける**流れ星**（大きく、明るい）。
*   **キャラクター**:
    *   動物たち: リス、ウサギ、キリン、ライオン、ワニ。
    *   配置: 画面内の定位置に登場し、ゆらゆらと揺れる。

**2. ゲームルール:**
*   **操作**: インベントリからプレゼントをドラッグして、対応する動物に渡す。
*   **正解判定**:
    *   正しいプレゼントを渡すと、拡大オーバーレイが表示される。
    *   サンタと動物が向かい合い、プレゼントが渡されるアニメーション。
    *   動物が「喜び」の画像に切り替わる。
    *   **プレゼント装着**: 渡したプレゼントが動物の頭上に表示され、一緒に揺れる。
*   **クリア条件**: すべての動物にプレゼントを渡す。

**3. フィナーレ演出:**
*   全員に配り終えると、動物たちが一斉に "Thank you Santa!" と吹き出しで感謝する。
*   **インタラクティブ・フィナーレ**:
    *   プレイヤーがサンタを操作してツリーハウス（画面中央）の周りを旋回させる。
    *   **"Merry Christmas!"**: キラキラ輝く文字が画面いっぱいに表示され、その後サンタに追従する。
    *   旋回するごとにサンタたちが徐々に小さくなり、最終的に夜空へ消えていく。

---

### **技術仕様 (共通)**

**1. ファイル構成:**
*   `index.html`: ステージ1（エントリーポイント）
*   `stage2.html`: ステージ2
*   `*.bak`: 過去バージョンのバックアップ

**2. アセット:**
*   画像: `santa2.png`, `reindeer2.png`, `sleigh2.png`, 各種プレゼント・動物画像。
*   音声: `christmas-song.mp3` (BGM), `bell.mp3` (SE)。

**3. 実装のポイント:**
*   **レスポンシブ**: PC/スマホ両対応（タッチイベント対応）。
*   **アニメーション**: CSS KeyframesとJSによるフレーム毎の座標計算を併用。
*   **状態管理**: ステージ間のデータ引き継ぎは行わず、ステージ2は独立したインベントリ初期化を行う（シンプル化のため）。
